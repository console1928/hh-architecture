# hh-architecture

1. Представим, что у нас есть данные, которые мы очень часто читаем по сравнению с другими (например, словарь стран). Как можно это оптимизировать?

- В зависимости от объема часто запрашиваемых данных, можно либо хранить их прямо в оперативной памяти сервиса, либо кэшировать на определенном уровне. Оба варианта уменьшают нагрузку на БД за счет уменьшения количества запросов к ней. Минус использования оперативной памяти состоит в ее ограниченном объеме. Минус использования кэша - в увеличении объема БД, что не играет большой роли, если объем данных действительно невелик. В специфичных случаях (если словарь вообще никогда не меняется) можно хранить его в браузере клиента (кэш или localStorage). В этом случае нагрузка на сервис почти исчезает, но труднее синхронизировать данные клиента с данными в БД сервиса.


2. Что можно сделать, если таблица вакансий стала слишком большой? Какие есть решения на уровне текущей базы данных? Можно ли ее чем то заменить?

- Если проблема в том, что снизилась скорость работы с базой данных, но места для данных на сервере еще достаточно, можно добавить индексы, что увеличит объем БД, но также увеличит и скорость чтения из БД. Однако, скорость записи/обновления/удаления данных может уменьшиться. Другой вариант - вертикальный шардинг, т.е., разделение текущей БД на несколько, с целью уменьшения их объема относительно первоначальной и, как следствие, увеличения скорости работы. При этом, все БД продолжают храниться на том же самом сервере, что и раньше, т.е., отсутствуют затраты на новое железо.

- Если проблема в том, что для базы данных не хватает места на сервере (или перестанет хватать в обозримом будущем), можно разделить ее на несколько БД, каждая из которых хранится на отдельном сервере (горизонтальный шардинг). Таким образом, мы получим не только увеличение скорости работы с БД (т.к. по сравнению с изначальной БД уменьшится объем каждой новой БД), но и дополнительное место для хранения данных, которые появятся в дальнейшем. Скорее всего, этот вариант будет самым затратным в финансовом плане, т.к. может понадобиться приобрести дополнительные сервера.


3. Какие вы видите узкие места, возможно неправильно выбранные технологии в текущей схеме (можно рассмотреть как “нашу” схему, так и схему настоящего hh.ru)?

Рассмотрим схему настоящего hh.ru:

- В схеме есть примерно 100 микросервисов, и все они связаны с API через прослойку logic и jlogic. Судя по тому, что некоторые запросы из API к микросервисам выполняются напрямую (минуя logic и jlogic), эта прослойка не совсем справляется со своим назначением (отделением API от сервисов)?

- Возможны общие проблемы микросервисной архитектуры, такие как большое число сетевых взаимодействий между сервисами (ввиду их большого количества), что снижает общую скорость работы сервиса. Это можно исправить применением более эффективных протоколов сетевого взаимодействия, уменьшением общего числа запросов. Также такая архитектура предполагает более сложную схему деплоя и тестирования, чем "традиционная" монолитная. Еще можно предположить, что количество БД в микросервисной архитектуре выше, чем в монолитной для аналогичного сервиса, что увеличивает сложность их синхронизации.